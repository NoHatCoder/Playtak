<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		 
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
		
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		
		<meta name="description" content="Play online Tak games. Tak is a strategy board game created by James Ernest and Patrick Rothfuss">
		<meta name="keywords" content="online tak, playtak, play tak">

		<title>Tak</title>
		<link rel="icon" type="image/x-icon" href="favicon.ico">

		<link rel="stylesheet" href="css/thirdparty/bootstrap.min.css">
		<link rel="stylesheet" href="css/thirdparty/jquery.contextMenu.min.css">
		<link rel="stylesheet" href="css/main.css">
		
		<script>
			var errorslogged=0;
			window.onerror=function errorHandler(message, source, lineno, colno, error){
				if(errorslogged<5){
					errorslogged++;
					var xhttp=new XMLHttpRequest();
					xhttp.open("GET", "jserror/"+message+"/"+source.replace(/^[\s\S]*\//,"")+"/"+lineno+"/"+colno+"/"+navigator.userAgent, true);
					xhttp.send();
				}
			}
		</script>

		<script src="js/thirdparty/jquery.min.js"></script>
		<script src="js/thirdparty/three.min.js"></script>
		<script src="js/thirdparty/OrbitControlsNPD.min.js"></script>
		<script src="js/thirdparty/linkify.min.js"></script>
		<script src="js/thirdparty/linkify-string.min.js"></script>
		<script src="js/thirdparty/bootstrap.min.js"></script>
		<script src="js/thirdparty/jquery.contextMenu.min.js"></script>

		<script src="js/chat.js"></script>
		<script src="js/server.js"></script>
		<script src="js/style_selector.js"></script>
		<script src="js/board.js"></script>
		<script src="js/ptn.js"></script>

	</head>

	<body>
		<audio id="move-sound">
			<source src="audio/move.ogg" type="audio/ogg">
			<source src="audio/move.mp3" type="audio/mpeg">
		</audio>
		<audio id="chime-sound">
			<source src="audio/chime.ogg" type="audio/ogg">
			<source src="audio/chime.mp3" type="audio/mpeg">
		</audio>
		<audio id="hurry-sound">
			<source src="audio/hurry.ogg" type="audio/ogg">
			<source src="audio/hurry.mp3" type="audio/mpeg">
		</audio>
		<nav id="menubar" class="singleline">
			<div class="navright">
				<a class="navitem" href="ratings.html" target="_blank" id="playerinfo" data-hover="Your username and rating, click to see rating list"></a
				><button class="navitem" id="soundoff" onclick="turnsoundon()" style="display:none;" data-hover="Sound is off">
					<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"></path></svg>
				</button><button class="navitem" id="soundon" onclick="turnsoundoff()" data-hover="Sound is on">
					<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"></path></svg>
				</button><button class="navitem" onclick="$('#settings-modal').modal('show')" data-hover="Open settings menu">
					<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg>
				</button><button class="navitemlogin" id="login-button" onclick="server.loginbutton()">
					Log In
				</button>
			</div>
			<button class="navitem" id="moremenu" onclick="$('#menubar').toggleClass('singleline');onWindowResize()">
				<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zM92.5 220.5l123 123c4.7 4.7 12.3 4.7 17 0l123-123c7.6-7.6 2.2-20.5-8.5-20.5H101c-10.7 0-16.1 12.9-8.5 20.5z"></path></svg>
			</button><button class="navitem" onclick="$('#creategamemodal').modal('show')">New Game</button
			><button class="navitem" style="min-width:124px;" onclick="$('#joingame-modal').modal('show')">Join Game <span class="badge" data-hover="Available humans + AIs to play against"><span id="seekcount">0</span> + <span id="seekcountbot">0</span></span></button
			><button class="navitem" style="min-width:76px;" onclick="$('#watchgame-modal').modal('show')">Watch <span class="badge" id="gamecount" data-hover="Games in progress">0</span></button
			><button class="navitem" onclick="$('#help-modal').modal('show')" data-hover="Information on game rules and Tak communities">Help</button
			><a class="navitem" href="/games" target="_blank" data-hover="Find and review old games">Old Games</a
			><button class="navitem" id="scratchbutton" style="position:relative;top:0;left:0;" onclick="togglescratch()" onblur="$('#scratchlist').hide()" data-hover="Open a scratch board">Board <span class="caret"></span><div id="scratchlist" style="display:none;">
				<div class="scratchsize" onclick="scratchbutton(3)">3x3</div>
				<div class="scratchsize" onclick="scratchbutton(4)">4x4</div>
				<div class="scratchsize" onclick="scratchbutton(5)">5x5</div>
				<div class="scratchsize" onclick="scratchbutton(6)">6x6</div>
				<div class="scratchsize" onclick="scratchbutton(7)">7x7</div>
				<div class="scratchsize" onclick="scratchbutton(8)">8x8</div>
			</div></button
			><button class="navitem" onclick="$('#loadmodal').modal('show')" data-hover="Load a game state from a PTN or TPS file">Load</button
			><div class="navitem" style="min-width:78px;" data-hover="Number of players currently logged in">Online <span class="badge" id="onlineplayersbadge">0</span></div
			>
		</nav>
		<div id="floating">
			<div id="notation-toggle-text" class="toggle-text" data-hover="Click to show/hide notation" onclick="adjustsidemenu('toggle',null)">
				&lt;&lt;<br>n<br>o<br>t<br>a<br>t<br>i<br>o<br>n
			</div>

			<div id="rmenu">
				<div class="center">
					<div id="player-opp">
						<svg id="player-opp-img" class="playerimg iswhite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><defs><path id="head" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path><clipPath id="insidehead"><use xlink:href="#head"></use></clipPath></defs><use xlink:href="#head" clip-path="url(#insidehead)"></use></svg>
						<div id="player-opp-name" class="player1-name">You</div>
						<div id="player-opp-time" class="player1-time">00.<span style="font-size:70%;">0</span></div>
					</div>
				</div>
				
				<div class="center" id="variablerules">
					<span id="komirule" class="rulebox" data-hover="Komi - If the game ends without a road, black will get this number on top of their flat count when the winner is determined"></span><span id="piecerule" class="rulebox" data-hover="Stone count - The number of stones/capstones that each player has in this game"></span>
				</div>

				<div class="optlist center">
					<button class="navitem" onclick="undoButton()" data-hover="Undo move - Only works if your opponent undoes as well">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path id="undo" d="M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"></path></svg>
					</button>
					<button class="navitem" onclick="server.draw()" data-hover="Request draw - Game is drawn if your opponent agrees">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path id="draw" d="M519.2 127.9l-47.6-47.6A56.252 56.252 0 0 0 432 64H205.2c-14.8 0-29.1 5.9-39.6 16.3L118 127.9H0v255.7h64c17.6 0 31.8-14.2 31.9-31.7h9.1l84.6 76.4c30.9 25.1 73.8 25.7 105.6 3.8 12.5 10.8 26 15.9 41.1 15.9 18.2 0 35.3-7.4 48.8-24 22.1 8.7 48.2 2.6 64-16.8l26.2-32.3c5.6-6.9 9.1-14.8 10.9-23h57.9c.1 17.5 14.4 31.7 31.9 31.7h64V127.9H519.2zM48 351.6c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16c0 8.9-7.2 16-16 16zm390-6.9l-26.1 32.2c-2.8 3.4-7.8 4-11.3 1.2l-23.9-19.4-30 36.5c-6 7.3-15 4.8-18 2.4l-36.8-31.5-15.6 19.2c-13.9 17.1-39.2 19.7-55.3 6.6l-97.3-88H96V175.8h41.9l61.7-61.6c2-.8 3.7-1.5 5.7-2.3H262l-38.7 35.5c-29.4 26.9-31.1 72.3-4.4 101.3 14.8 16.2 61.2 41.2 101.5 4.4l8.2-7.5 108.2 87.8c3.4 2.8 3.9 7.9 1.2 11.3zm106-40.8h-69.2c-2.3-2.8-4.9-5.4-7.7-7.7l-102.7-83.4 12.5-11.4c6.5-6 7-16.1 1-22.6L367 167.1c-6-6.5-16.1-6.9-22.6-1l-55.2 50.6c-9.5 8.7-25.7 9.4-34.6 0-9.3-9.9-8.5-25.1 1.2-33.9l65.6-60.1c7.4-6.8 17-10.5 27-10.5l83.7-.2c2.1 0 4.1.8 5.5 2.3l61.7 61.6H544v128zm48 47.7c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16c0 8.9-7.2 16-16 16z"></path></svg>
					</button>
					<button class="navitem" onclick="server.resign()" data-hover="Resign - You lose the game immediately">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M336.174 80c-49.132 0-93.305-32-161.913-32-31.301 0-58.303 6.482-80.721 15.168a48.04 48.04 0 0 0 2.142-20.727C93.067 19.575 74.167 1.594 51.201.104 23.242-1.71 0 20.431 0 48c0 17.764 9.657 33.262 24 41.562V496c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-83.443C109.869 395.28 143.259 384 199.826 384c49.132 0 93.305 32 161.913 32 58.479 0 101.972-22.617 128.548-39.981C503.846 367.161 512 352.051 512 335.855V95.937c0-34.459-35.264-57.768-66.904-44.117C409.193 67.309 371.641 80 336.174 80zM464 336c-21.783 15.412-60.824 32-102.261 32-59.945 0-102.002-32-161.913-32-43.361 0-96.379 9.403-127.826 24V128c21.784-15.412 60.824-32 102.261-32 59.945 0 102.002 32 161.913 32 43.271 0 96.32-17.366 127.826-32v240z"></path></svg>
					</button>
				</div>

				<div id="notationbar">
					<table id="moveslist">
					</table>
				</div>

				<div class="optlist center">
					<button class="navitem" onclick="fastrewind()">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 436V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v151.9L235.5 71.4C256.1 54.3 288 68.6 288 96v131.9L459.5 71.4C480.1 54.3 512 68.6 512 96v320c0 27.4-31.9 41.7-52.5 24.6L288 285.3V416c0 27.4-31.9 41.7-52.5 24.6L64 285.3V436c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12z"></path></svg>
					</button>
					<button class="navitem" onclick="stepback()">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"></path></svg>
					</button>
					<button class="navitem" onclick="stepforward()">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"></path></svg>
					</button>
					<button class="navitem" onclick="fastforward()">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M512 76v360c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V284.1L276.5 440.6c-20.6 17.2-52.5 2.8-52.5-24.6V284.1L52.5 440.6C31.9 457.8 0 443.4 0 416V96c0-27.4 31.9-41.7 52.5-24.6L224 226.8V96c0-27.4 31.9-41.7 52.5-24.6L448 226.8V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12z"></path></svg>
					</button>
				</div>

				<div class="optlist center">
					<a id="download_notation" class="navitem" onclick="downloadNotation()" data-hover="Download the game as a PTN-file" href="dummy">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"></path></svg>
					</a>
					<button class="navitem" onclick="copyNotationLink()" data-hover="Copy a link to this game to your clipboard">
						<svg class="navicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg>
					</button>
				</div>

				<div class="center">
					<div id="player-me">
						<svg id="player-me-img" class="playerimg isblack" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><defs><path id="head" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path><clipPath id="insidehead"><use xlink:href="#head"></use></clipPath></defs><use xlink:href="#head" clip-path="url(#insidehead)"></use></svg>
						<div id="player-me-name" class="player2-name">You</div>
						<div id="player-me-time" class="player2-time">00.<span style="font-size:70%;">0</span></div>
					</div>
				</div>
			</div>
		</div>

		<div id="chat">
			<div id="chat-toggle-button" class="toggle-text" data-hover="Click to show/hide chat" onclick="adjustsidemenu(null,'toggle')">
				&gt;&gt;<br>c<br>h<br>a<br>t
			</div>
			<div id="cmenu">
				<div id="roomslist"></div>
				<div id="room_divs"></div>
				<div id="chatwrite">
					<form role="form" onsubmit="return chathandler.send()" autocomplete="off">
						<input type="text" class="form-control" id="chat-me">
						<button id="send-button" type="submit" class="btn btn-primary">Send</button>
					</form>
				</div>
			</div>
		</div>

		<div id="alertbox">
			<div class="alerts">
				<div id="alert" class="alert alert-dismissible hidden" role="alert">
					<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<span id="alert-text">Text</span>
				</div>
			</div>
		</div>

		<div id="creategamemodal" class="modal fade" role="dialog">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-body">
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="boardsize">Board Size</label>
									<select class="form-control" id="boardsize" onchange="changeboardsize()">
										<option value="3">3x3</option>
										<option value="4">4x4</option>
										<option value="5" selected="selected">5x5</option>
										<option value="6">6x6</option>
										<option value="7">7x7</option>
										<option value="8">8x8</option>
									</select>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group" data-hover="Komi - If the game ends without a road, black will get this number on top of their flat count when the winner is determined">
									<label for="komiselect">Komi</label>
									<select class="form-control" id="komiselect">
										<option value="0" selected="selected">0.0</option>
										<option value="1">0.5</option>
										<option value="2">1.0</option>
										<option value="3">1.5</option>
										<option value="4">2.0</option>
										<option value="5">2.5</option>
										<option value="6">3.0</option>
										<option value="7">3.5</option>
										<option value="8">4.0</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="piececount">Stones</label>
									<input class="form-control" type="number" min="10" max="80" step="1" id="piececount" value="21">
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label for="capcount">Capstones</label>
									<input class="form-control" type="number" min="0" max="5" step="1" id="capcount" value="1">
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group" data-hover="Game type - Tournament games will be marked as such in the database, they also allow greater time to reconnect if a player is disconnected during the game. Unrated games do not count towards the players' rating">
									<label for="gametype">Game type</label>
									<select class="form-control" id="gametype">
										<option value="0" selected="selected">Normal</option>
										<option value="1">Tournament</option>
										<option value="2">Unrated</option>
									</select>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group" data-hover="Enter the name of another player to allow only that player to join">
									<label for="opname">Opponent</label>
									<input class="form-control" type="text" id="opname" value="">
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="timeselect">Time (minutes per player)</label>
									<select class="form-control" id="timeselect">
										<option>1</option>
										<option>2</option>
										<option>3</option>
										<option>5</option>
										<option>7</option>
										<option selected="selected">10</option>
										<option>15</option>
										<option>20</option>
										<option>30</option>
										<option>45</option>
										<option>60</option>
										<option>90</option>
										<option>120</option>
										<option>180</option>
									</select>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label for="incselect">Increment (seconds)</label>
									<select class="form-control" id="incselect">
										<option>0</option>
										<option>1</option>
										<option>2</option>
										<option>3</option>
										<option>5</option>
										<option>7</option>
										<option>10</option>
										<option>15</option>
										<option selected="selected">20</option>
										<option>30</option>
										<option>45</option>
										<option>60</option>
										<option>90</option>
										<option>120</option>
										<option>180</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<div class="form-group" data-hover="Select your color, white will move first">
									<label for="colorselect">My Color</label>
									<select class="form-control" id="colorselect">
										<option value="A" selected="selected">Random</option>
										<option value="W">White</option>
										<option value="B">Black</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row center">
							<div class="col-sm-12">
								<form role="form" onsubmit="server.seek(); return false;">
									<button type="submit" class="btn btn-primary">Create</button>
								</form>
							</div>
						</div>
						<div class="row center">
							<div class="col-sm-12">
								<form role="form" onsubmit="server.removeseek(); return false;">
									<br>
									<button type="submit" class="btn btn-default">Remove Seeks</button>
								</form>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
		</div></div>

		<div id="gameoveralert" class="modal fade" role="dialog">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-body">
						<div class="row">
							<div class="col-sm-12 center" id="gameoveralert-text">
							</div>
						</div>
						<div class="modal-footer center">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
		</div></div>

		<div id="loadmodal" class="modal fade" role="dialog">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-body">
						<div class="row">
						<div class="col-sm-12">
							<form role="form">
							<div class="form-group">
								<label>Paste PTN/TPS:</label>
								<input type="text" class="form-control" id="loadptntext">
							</div>
							</form>
						</div>
						</div>
						<div class="modal-footer center">
							<button type="button" class="btn btn-primary" onclick='load(); return false;'>Load</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
		</div></div>

		<div id="login" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<div class="row center border">
							<div class="col-sm-12">
								<form role="form" onsubmit="server.guestlogin(); return false;">
									<br>
									<button type="submit" class="btn btn-primary" data-hover="As guest you will be able to play, but you will not be rated or have a permanent user name">Guest Login</button>
									<br><br>
								</form>
							</div>
						</div>
						<br>
						<div class="row border halfrow leftmost">
							<div class="col-sm-6-custom">
								<form role="form" onsubmit="server.login(); return false;">
									<div class="form-group" data-hover="Note: Case sensitive">
										<label for="usr">Username</label>
										<input type="text" class="form-control" id="login-username">
									</div>
									<div class="form-group">
										<label for="pwd">Password:</label>
										<input type="password" class="form-control" id="login-pwd">
									</div>
									<div class="checkbox">
										<label><input id = "keeploggedin" type="checkbox" value="">Keep me logged in</label>
									</div>
									<button type="submit" class="btn btn-primary">Login</button>
								</form>
								<br>
								<a href="#" onclick="showresetpwd(); return false;">Forgot password?</a>
								<br>
							</div>
						</div>
						<div class="row border halfrow">
							<div class="col-sm-6-custom">
								<form role="form" onsubmit="server.register(); return false;">
									<div class="form-group" data-hover="4 to 16 characters, use numbers, letters and underscore">
										<label for="usr">Username</label>
										<input type="text" class="form-control" id="register-username">
									</div>
									<div class="form-group">
										<label for="email">Email address:</label>
										<input type="email" class="form-control" id="register-email">
									</div>
									<div class="form-group">
										<label for="email">Re-type Email address:</label>
										<input type="email" class="form-control" id="retype-register-email">
									</div>
									<button type="submit" class="btn btn-primary">Sign up</button>
								</form>
							</div>
						</div>

						<div class="row center">
							<div class="col-sm-12">
							<div id="alert2" class="alert alert-dismissible hidden" role="alert">
								<span id="alert-text2">Text</span>
							</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal" onclick="$('#login').modal('hide')">Close</button>
					</div>
				</div>
		</div></div>

		<div id="settings-modal" class="modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Settings</h4>
					</div>
					<div class="modal-body">
						<ul class="nav nav-tabs">
							<li role="presentation" class="active"><a href="#board" data-toggle="tab">Board and Pieces</a></li>
							<li role="presentation"><a href="#interface" data-toggle="tab">Interface</a></li>
							<li role="presentation"><a href="#account" data-toggle="tab">Account</a></li>
						</ul>
						<div class="tab-content clearfix">
							<div class="tab-pane active" id="board">
								<br>
								<form>
									<input id="dark-mode" type="checkbox" onClick="checkboxDarkMode()">
									Dark mode
								</form><br>
								<form>
									<span data-hover="Examples: #000000, #ffffff, #606060">
										Background color <input type="color" id="clearcolorbox" class="form-control" oninput="clearcolorchange(this.value)" maxlength="7" minlength="7">
									</span>
								</form><br>
								<form>
									<input id="wall-orientation" type="checkbox" onClick="checkboxDiagonalWalls()">
									Diagonal walls
								</form><br>
								<form>
									Piece size
									<input id="piece-size-slider" type="range" value="60" step="2" min="40" max="80" oninput="sliderPieceSize(this.value);board.updatepieces()" onChange="sliderPieceSize(this.value);board.updatepieces()">
									<span id="piece-size-display">60</span>
								</form><br>
								<form>
									<input id="show-table" type="checkbox" onChange="showTable(event)">
									Show table
								</form><br>
								<form id="white_pieces_form">
									White pieces<br>
								</form><br>
								<form id="black_pieces_form">
									Black pieces<br>
								</form><br>
									Custom pieces<br>
									<input type="file" id="piecetexture"><br>
								<form id="white_squares_form">
									White squares<br>
								</form><br>
								<form id = "black_squares_form">
									Black squares<br>
								</form>
							</div>
							<div class="tab-pane" id="interface">
								<br>
								<form>
									<span data-hover="Makes edges less jaggy, requires page reload to take effect">
										<input id="antialiasing-checkbox" type="checkbox" onClick="checkboxAntialiasing()" checked>
										Browser default antialiasing
									</span>
									<br>
									<br>
									<span data-hover="Makes textures sharper">
										Anisotropic filtering
										<input id="aniso-slider" type="range" value="3" step="1" min="0" max="3" oninput="sliderAniso(this.value,true)" onchange="sliderAniso(this.value,true)">
										<span id="aniso-display">16x</span>
									</span>
									<br>
									<br>
									<span data-hover="Additional antialiasing, high performance impact">
										Rendering scale
										<input id="scale-slider" type="range" value="2" step="1" min="0" max="4" oninput="sliderScale(this.value,true)" onchange="sliderScale(this.value,true)">
										<span id="scale-display">1x</span>
									</span>
									<br>
									<br>
									<input id="hide-chat-time" type="checkbox" onClick="chathandler.hideChatTime()">
									Hide chat timestamps
									<br>
									<br>
									<input id="hide-send-checkbox" type="checkbox" onClick="checkboxHideSend()">
									Hide 'Send' button
									<br>
									<br>
									<input id="auto-rotate-checkbox" type="checkbox" onClick="checkboxAutoRotate()" checked>
									Rotate board when player 2
									<br>
									<br>
									Chat size
									<input id="chat-size-slider" type="range" value="180" step="2" min="100" max="500" oninput="sliderChatSize(this.value)" onchange="sliderChatSize(this.value)">
									<span id="chat-size-display">180</span>
									<br>
									<br>
									<span data-hover="How much objects grow smaller with distance">
										Perspective
										<input id="perspective-slider" type="range" value="90" step="10" min="0" max="150" oninput="perspectiveChange(this.value)" onchange="perspectiveChange(this.value)">
										<span id="perspective-display">90</span>
									</span>
									<br>
									<br>
									<span data-hover="Make the camera immoveable, makes moving easier, especially on touch screens">
										<input id="fix-camera-checkbox" type="checkbox" onClick="checkboxFixCamera()">
										Fix camera
									</span>
									<br>
									<br>
									<span data-hover="Register clicks on the board instead of piece stacks, makes every stack selectable, even if it is obscured">
										<input id="click-checkbox" type="checkbox" onClick="checkboxClick()">
										Click through stacks
									</span>
									<br>
									<br>
									<span data-hover="Enable help texts like these">
										<input id="hover-checkbox" type="checkbox" onClick="checkboxHover()">
										Help texts
									</span>
								</form>
							</div>
							<div class="tab-pane" id="account">
								<form role="form" onsubmit="server.changepassword(); return false;">
									<br>
									<h4>Change Password</h4><br>
									<div class="form-group">
										<label for="pwd">Current password:</label>
										<input type="password" class="form-control" id="cur-pwd">
									</div>
									<div class="form-group">
										<label for="pwd">New password:</label>
										<input type="password" class="form-control" id="new-pwd">
									</div>
									<div class="form-group">
										<label for="pwd">Retype new password:</label>
										<input type="password" class="form-control" id="retype-new-pwd">
									</div>
									<button type="submit" class="btn btn-primary">Change Password</button>
								</form>
							</div>
						</div>
					</div>
				</div>
		</div></div>

		<div id="privacy-modal" class="modal fade">
			<div class="modal-dialog modal-md">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Privacy Policy</h4>
					</div>
					<div class="modal-body">
						<ul>
							<li>All online games are recorded and available for viewing <a target="_blank" href="games">here</a> and includes player names</li>
							<li>IP addresses will be logged for abuse control</li>
							<li>Only email addresses, passwords, IP addresses will remain private on the server</li>
						</ul>
					</div>
				</div>
		</div></div>

		<div id="resetpwd-modal" class="modal fade">
			<div class="modal-dialog modal-md">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Reset Password</h4>
					</div>
					<div class="modal-body">
						<ul class="nav nav-tabs" id="resetpwd-ul">
							<li role="presentation" class="active"><a href="#sendresettoken" data-toggle="tab">Send Reset Token</a></li>
							<li role="presentation"><a href="#resetpwd" data-toggle="tab">Reset Password</a></li>
						</ul>
						<div class="tab-content clearfix">
							<div class="tab-pane active" id="sendresettoken">
								<form role="form" onsubmit="server.sendresettoken(); return false;">
									<div class="form-group">
										<label for="usr">Username</label>
										<input type="text" class="form-control" id="resettoken-username">
									</div>
									<div class="form-group">
										<label for="email">Email address:</label>
										<input type="email" class="form-control" id="resettoken-email">
									</div>
									<button type="submit" class="btn btn-primary">Send token</button>
								</form>
							</div>
							<div class="tab-pane" id="resetpwd">
								<form role="form" onsubmit="server.resetpwd(); return false;">
									<div class="form-group">
										<label for="usr">Username</label>
										<input type="text" class="form-control" id="resetpwd-username">
									</div>
									<div class="form-group">
										<label for="usr">Token</label>
										<input type="text" class="form-control" id="resetpwd-token">
									</div>
									<div class="form-group">
										<label for="pwd">New password:</label>
										<input type="password" class="form-control" id="reset-new-pwd">
									</div>
									<div class="form-group">
										<label for="pwd">Retype New password:</label>
										<input type="password" class="form-control" id="reset-retype-new-pwd">
									</div>
									<button type="submit" class="btn btn-primary">Reset password</button>
								</form>
							</div>
						</div>
					</div>
				</div>
		</div></div>

		<div id="help-modal" class="modal fade">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Help</h4>
					</div>
					<div class="modal-body">
						<ul class="nav nav-tabs" role="tablist">
							<li class="nav-item active">
								<a class="active" data-toggle="tab" href="#help-info" role="tab" aria-controls="help-info" aria-selected="true">
									Info
								</a>
							</li>
							<li class="nav-item">
								<a data-toggle="tab" href="#help-rules" role="tab" aria-controls="help-rules" aria-selected="false">
									Rules
								</a>
							</li>
							<li class="nav-item">
								<a data-toggle="tab" href="#help-controls" role="tab" aria-controls="help-controls" aria-selected="false">
									Controls
								</a>
							</li>
						</ul>
						<!-- content -->
						<div class="tab-content">
							<!-- 1st card -->
							<div class="tab-pane fade active in" id="help-info" role="tabpanel" aria-labelledby="help-info">
								<div>
									<h4>General information</h4>
									<ul>
										<li>
											Join the Tak communities:
											<ul>
												<li>
													US Tak Association: <a href="https://ustak.org/" target="_blank" rel="noopener noreferrer">https://ustak.org/</a>
												</li>
												<li> For daily puzzles, homemade sets, asynchronous games, discussion, and more:
													<a href="https://discord.gg/2xEt42X" target="_blank" rel="noopener noreferrer">
														Tak Talk discord
													</a>
												</li>
												<li>
													<a href="https://www.reddit.com/r/Tak/" target="_blank" rel="noopener noreferrer">
														Tak subreddit
													</a>
												</li>
											</ul>
										</li>
										<li>
											Physical Tak sets can be purchased at:
											<ul>
												<li>
													<a href="https://worldbuildersmarket.com/collections/tak-a-beautiful-game" target="_blank" rel="noopener noreferrer">
														https://worldbuildersmarket.com
													</a>
												</li>
												<li>
													<a href="https://aswood.works/shop" target="_blank" rel="noopener noreferrer">
														https://aswood.works/shop
													</a>
												</li>
											</ul>

										</li>
										<li>
											Rules for Tak were made by
											<a href="https://en.wikipedia.org/wiki/James_Ernest"
												target="_blank"
												rel="noopener noreferrer"
												>James Ernest</a
											>
											and
											<a href="https://en.wikipedia.org/wiki/Patrick_Rothfuss"
											target="_blank"
											rel="noopener noreferrer"
												>Patrick Rothfuss</a
											>.
										</li>
										<li>
											This is an unofficial implementation by
											<a 
											href="https://github.com/chaitu236"
											target="_blank" 
											rel="noopener noreferrer"
												>Chaitanya Vadrevu</a
											>
											with the help of other volunteers. Currently maintained by
											the
											<a href="https://ustak.org/" target="_blank" rel="noopener noreferrer"
												>US Tak Association</a
											>.
										</li>
										<li>
											Code can be found here: 
											<a
											href="https://github.com/NoHatCoder/Playtak"
											target="_blank"
											rel="noopener noreferrer"
												>Playtak - Github</a
											>
										</li>
										<li>Ticking sound by FoolBoyMedia.</li>
										<li>
											<a href="#" onclick="showPrivacyPolicy();">
												Privacy Policy</a>
										</li>
									</ul>
								</div>
							</div>
							<!-- 2nd card -->
							<div class="tab-pane fade" id="help-rules" role="tabpanel" aria-labelledby="help-rules" >
								<div>
									<h4>Playtak House Rules</h4>
									<ul>
										<li>
											Standard rules for Tak can be found here:
											<ul>
												<li>
													<a href="https://ustak.org/play-beautiful-game-tak/" target="_blank" rel="noopener noreferrer">
														USTA Rules
													</a> 
												</li>
												<li>
													<a href="https://www.youtube.com/watch?v=M-Fh50QD4qI" target="_blank" rel="noopener noreferrer">
														Greater Than Games - How to play Tak
													</a> [video]
												</li>
											</ul>

										</li>
										<li>White always moves first, though they place a Black stone on their first move.</li>
										<li>
											Games may be played with komi, meaning that if the game ends in a flat count, 
											black has a number of virtual flats added to their flat count, 
											so that black may win or draw with fewer flats. The size of the komi is adjustable.
										</li>
										<li>
											If neither player plays a stone or flattens a standing stone for 25 moves, the game is ruled a draw. 
										</li>
									</ul>
									<h4>Portable Tak Notation</h4>
									<ul>
										<li>PTN or Portable Tak Notation is a method of recording games and describing moves using text.</li>
										<li>
											You can learn about the game notation here:
											<ul>
												<li>
													<a
													href="https://ustak.org/portable-tak-notation/"
													target="_blank"
													rel="noopener noreferrer"
													>USTA - Portable Tak Notation</a
												>
												</li>
												<li>
													<a
													href="https://www.youtube.com/watch?v=9TIamK9Skhs"
													target="_blank"
													rel="noopener noreferrer"
													>Simmon - Portable Tak Notation</a
												> [video]
												</li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
							<!-- 3nd card -->
							<div class="tab-pane fade third" id="help-controls" role="tabpanel" aria-labelledby="help-controls">
								<div>
									<h4>Controls</h4>
									<ul>
										<li>Left click-drag (or touch-drag) to rotate board.</li>
										<li>
											Left click a piece to select it. Left click on it again
											(or right click) to rotate it.
										</li>
										<li>
											Left click on a square to place selected piece or to pick
											up stack.
										</li>
										<li>
											Right click on a stack to hide pieces on all other squares
											(to see stack clearly).
										</li>
										<li>
											Scroll wheel to zoom in/out. For touch devices, use
											two-finger pinch.
										</li>
										<li>
											Current player to move is indicated by highlighting their
											name with a border.
										</li>
										<li>
											If any of the above controls don't work, it means that
											control is invalid for current move.
										</li>
									</ul>
									<h4>Play Locally</h4>
									<ul>
										<li>
											Select board size to create a new empty board on which you
											can play locally.
										</li>
									</ul>
									<h4>Play Online</h4>
									<ul>
										<li>
											Login to server by clicking "Login" button, signup and
											then login.
										</li>
										<li>
											Click on "New Seek" in the menu to start a new game
											or accept another player's seek by selecting it in
											"Join game" menu.
										</li>
										<li>
											Click on one of any ongoing games from "Watch" menu to
											watch an ongoing game.
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
		</div></div>

		<div id="joingame-modal" class="modal fade">
			<div class="modal-dialog modal-md">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Join Game</h4>
					</div>
					<div class="modal-body">
						<table class="linestable">
							<tbody>
								<tr class="headerrow">
									<td>Color</td>
									<th>Player</th>
									<td class="right">Rating</td>
									<td class="right">Board</td>
									<td class="right">Time</td>
									<td class="right">Per move</td>
									<td class="right">Komi</td>
									<td class="right">Stones</td>
									<td class="right"></td>
								</tr>
							</tbody>
							<tbody id="seeklist"></tbody>
							<tbody>
								<tr class="headerrow">
									<td>Color</td>
									<th>AI</th>
									<td class="right">Rating</td>
									<td class="right">Board</td>
									<td class="right">Time</td>
									<td class="right">Per move</td>
									<td class="right">Komi</td>
									<td class="right">Stones</td>
									<td class="right"></td>
								</tr>
							</tbody>
							<tbody id="seeklistbot"></tbody>
						</table>
					</div>
				</div>
		</div></div>

		<div id="watchgame-modal" class="modal fade">
			<div class="modal-dialog modal-md">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Watch Game</h4>
					</div>
					<div class="modal-body">
						<table class="linestable">
							<tbody id="gamelist"></tbody>
						</table>
					</div>
				</div>
		</div></div>
		<div id="addressbarhack" style="height:5000px;width:100%;position:absolute;top:0;left:0;"></div>
		<canvas id="gamecanvas"></canvas>
		<div id="hovertext"></div>
		<script src="js/main.js"></script>
	</body>
</html>
